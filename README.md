# QAProjectJenkins

PLANNING STAGE:

During the planning stage I created a Trello page which created an environment for me where I could track my work. I set up the board highlighting all the steps I would need to take to start the project and to understand the definition of the project being completed. This started with getting a repo set up and having my SQL database fully set up before going into building an image. Once I created this I made sure to mark it on my Trello board and move onto the next step. Following from this I made sure to understand how nexus, docker & jenkins works and which application to start of with. Once I built the docker image and started the container I made sure that the application works by testing the localhost:5000/log to see if this output the page I've set in my @app.rout('/log') within my app.py file. C:\Users\johns\Documents\project1\project1\Screenshots\TrelloBoard.png

Understading that this process was completed and successful, I understood that the next step would be to set up nexus so it is ready to connect to my docker container. Once this was completed the final step was to understand jenkins and what requirements I needed to automate this process for me.

STEPS TO RECREATE:

1. After Creating the SQL Table, app.py, backup.py & data.py files the next step is to create a Dockerfile located outside of the src/ folder all 3 .py files are located in with the code highlighted below. Whilst making sure Docker Hub is open I ran "docker build -t localhost:8083/pythonapp ." to build my docker image which is also shown below.

2. Once the image was built and we had all that we needed it was time to build the container. Using "docker run -d -p 5000:5000 -e SQL_HOST=host.docker.internal --name pythonapp localhost:8083/pythonapp", using "SQL-host=host.docker.internal" to allow the container to connect to the database I created earlier on. Using "Docker ps" will then allow me to see whether my container is running or not, which is also shown in the screenshot.

3. After establishing that I was able to restart a container using my docker image the next step was to upload this to nexus using the nexus container provided to us using localhost:8081. Once Nexus was running the first step was to create a Blob storage of type "File" and filling out the information required based on your preference. Following on from the previous step I added "Docker Bearer Token" which is an access token for anonymous pulls. Furthermore, the next step would be creating a repository of type "Docker (hosted)" filling out the required fields. 

4. The next step and the final step included setting up 'Jenkins', for this we were required to use the "wsl" command in a fresh command line to activate Ubuntu within the command line. With the bash script provided to us we were able to install Jenkins on the VM which would then allow us to set up the required pipeline needed. Once Jenkins was all set up I created a brand new pipeline with the type of "Pipeline". The config as shown in the image highlights that I picked Pipeline script from SCM(Source Code Management) under definition, this allowed me to include my git repo after picking git as an SCM. This would allow Jenkins to understand where the necessary files are during the pipeline process. Creating a Jenkinsfile allowed me to include all the stages and commands I wanted Jenkins to use when running the pipeline. Using the correct syntax & instructions (As shown below) would allow Jenkins to Build the docker image, start container & log in to nexus to upload the container. I've also added scripts to stop the container and restart the container to allow me to make changes without breaking the pipeline.
